# Generated by GPT

from PIL import Image

def xor_images(image1_path, image2_path, output_path):
    # Open the input images
    image1 = Image.open(image1_path)
    image2 = Image.open(image2_path)

    # Ensure the images have the same size
    if image1.size != image2.size:
        raise ValueError("Input images must have the same size")

    # Perform XOR operation on each pixel
    xor_image = Image.new("RGB", image1.size)
    pixels1 = image1.load()
    pixels2 = image2.load()
    xor_pixels = xor_image.load()

    for i in range(image1.size[0]):
        for j in range(image1.size[1]):
            r1, g1, b1 = pixels1[i, j]
            r2, g2, b2 = pixels2[i, j]
            xor_pixels[i, j] = (255 - r1 ^ r2, 255 - g1 ^ g2, 255 - b1 ^ b2)

    # Save the XOR image
    xor_image.convert("L").save(output_path)
    print("XOR image saved successfully!")

# Usage example
image1_path = "a.png"
image2_path = "b.png"
output_path = "xor_output.png"

xor_images(image1_path, image2_path, output_path)